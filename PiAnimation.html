<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<table style="border: 2px black">
    <tr>
        <td>
            <canvas width="600" height =600" id="canvas" style="border:5px red">
                Error
            </canvas>
        </td>
        <td>
            <h2 id="samples">Samples: </h2>
            <h2 id="text">Pi: </h2>
        </td>

    </tr>


</table>



<script>
    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var width=canvas.width;
    var height=canvas.height;
    var pi, averageCounter= 0, probabilityCounter= 0, average=0;
    var area=width*height;
    var textWindow=document.getElementById("text");

     var animate =
            window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.msRequestAnimationFrame ||
            window.oRequestAnimationFrame ||
            function(callback) {
                return setTimeout(callback, 1);
            };

 console.log("initialized variables", width+" ", height );
    var textRect=new Rect(10,50, 400, 100);


    function Rect(x,y, width, height) {
        this.x = x;
        var y = y;
        var width = width;
        var height = height;
    }


        function Circle(x,y, radius) {
        this.x = x;
        this.y = y ;
        this.radius = radius;
   //     this.dx = Math.random() * 5;
     //   this.dy = Math.random() * 5;


    }
    function clearScreen() {
        ctx.clearRect(0,0,width,height);
    }


            //filled
    function drawCircle(circle) {
        if(circle.x==null||circle.y==null||circle.radius==null) console.log("circle not initialized");
        ctx.beginPath()
        ctx.arc(circle.x, circle.y, circle.radius, 0, Math.PI * 2, false);
        ctx.closePath();

        // color in the circle
        //red
        ctx.fillStyle = "#FF0000";
        ctx.fill();

    }

        function drawCircleStroke(circle) {
            if(circle.x==null||circle.y==null||circle.radius==null) console.log("circle not initialized");
            ctx.beginPath()
            ctx.arc(circle.x, circle.y, circle.radius, 0, Math.PI * 2, false);
            ctx.closePath();

            //need to be clear for dots to appear
              ctx.strokeStyle='#000000'
              ctx.stroke();
        }





        function init() {
            console.log("init called")
            var circle=new Circle(width/2, height/2, (width+height)/4);
            var precision=1000;
            drawCircleStroke(circle);
            function run() {
                        animate(run);
                console.log("run called");
                for(var i=0; i<precision; i++) {
                    var xvar=Math.random()*width, yvar=Math.random()* height;
                    var dot=new Circle(xvar, yvar, 1);
                                                // < or > to check if it's inside the circle
                    if( Math.pow(xvar,2)+Math.pow(yvar,2) < Math.pow(circle.radius,2))
                        probabilityCounter++;
                }
                /*
                I'm only drawing the last dot of the loop because if i did every dot, the canvas would fill to quickly
                 */
                drawCircle(dot);


                    //#math

                    average= ( ((averageCounter)* average)+(probabilityCounter/precision)  ) / (averageCounter+1);
                    averageCounter++;


                    pi=4*average*area/(Math.pow(circle.radius,2));

                //clear the display for the current value of pi
                //add a container rect for the value of pi
                //display the value for pi
                    textWindow.innerHTML="Pi is: "+pi;
                    document.getElementById("samples").innerHTML="# of Samples: "+ averageCounter;
                console.log("pi/true mean: ", pi+" ", "x: ", xvar+" ", "y: ", yvar+" ", "average%: ", 1-average+" ", "samples: ", averageCounter+" ", "Number of success: ", probabilityCounter);
                //reset probabilityCounter
                probabilityCounter=0;
            }
            run();
        }


  init();

</script>

</body>
</html>